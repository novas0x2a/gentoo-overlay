From 6df379e2c7d3bd37f960b3f7918bda798b710a13 Mon Sep 17 00:00:00 2001
From: Mike Lundy <mike@fluffypenguin.org>
Date: Tue, 25 Aug 2009 13:28:28 -0700
Subject: [PATCH] grrr. i want per-app proxy settings, not global

---
 work/libpurple/proxy.c   |    2 +-
 work/pidgin/gtkaccount.c |    2 +-
 work/pidgin/gtkprefs.c   |    6 +++---
 3 files changed, 5 insertions(+), 5 deletions(-)

diff --git a/work/pidgin-2.6.1/libpurple/proxy.c b/work/pidgin-2.6.1/libpurple/proxy.c
index ed1a6ed..0452cf2 100644
--- a/work/pidgin-2.6.1/libpurple/proxy.c
+++ b/work/pidgin-2.6.1/libpurple/proxy.c
@@ -2187,7 +2187,7 @@ purple_proxy_get_setup(PurpleAccount *account)
 			gpi = NULL;
 	}
 	if (gpi == NULL) {
-		if (purple_running_gnome())
+		if (0 && purple_running_gnome())
 			gpi = purple_gnome_proxy_get_info();
 		else
 			gpi = purple_global_proxy_get_info();
diff --git a/work/pidgin-2.6.1/pidgin/gtkaccount.c b/work/pidgin-2.6.1/pidgin/gtkaccount.c
index 81d5932..4ad8265 100644
--- a/work/pidgin-2.6.1/pidgin/gtkaccount.c
+++ b/work/pidgin-2.6.1/pidgin/gtkaccount.c
@@ -962,7 +962,7 @@ make_proxy_dropdown(void)
 
 	gtk_list_store_append(model, &iter);
 	gtk_list_store_set(model, &iter,
-			0, purple_running_gnome() ? _("Use GNOME Proxy Settings")
+			0, (0 && purple_running_gnome()) ? _("Use GNOME Proxy Settings")
 			:_("Use Global Proxy Settings"),
 			1, PURPLE_PROXY_USE_GLOBAL,
 			-1);
diff --git a/work/pidgin-2.6.1/pidgin/gtkprefs.c b/work/pidgin-2.6.1/pidgin/gtkprefs.c
index 690bc0f..bf8feed 100644
--- a/work/pidgin-2.6.1/pidgin/gtkprefs.c
+++ b/work/pidgin-2.6.1/pidgin/gtkprefs.c
@@ -1887,7 +1887,7 @@ network_page(void)
 	pidgin_prefs_labeled_password(hbox, "_Password:",
 		"/purple/network/turn_password", NULL);
 
-	if (purple_running_gnome()) {
+	if (0 && purple_running_gnome()) {
 		vbox = pidgin_make_frame(ret, _("Proxy Server &amp; Browser"));
 		prefs_proxy_frame = gtk_vbox_new(FALSE, 0);
 
@@ -2034,11 +2034,11 @@ network_page(void)
 	gtk_widget_show_all(ret);
 	g_object_unref(sg);
 	/* Only hide table if not running gnome otherwise we hide the IP address table! */
-	if (!purple_running_gnome() && (proxy_info == NULL ||
+	if ((1 || !purple_running_gnome()) && (proxy_info == NULL ||
 	    purple_proxy_info_get_type(proxy_info) == PURPLE_PROXY_NONE ||
 	    purple_proxy_info_get_type(proxy_info) == PURPLE_PROXY_USE_ENVVAR)) {
 		gtk_widget_hide(table);
-	} else if (purple_running_gnome()) {
+	} else if ( 0 && purple_running_gnome()) {
 		gchar *path;
 		path = g_find_program_in_path("gnome-network-preferences");
 		if (path != NULL) {
-- 
1.6.4

